<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
          Elastic Cluster 구성 5 - Jongmin&#39;s blog
        
    </title>

    <link rel="canonical" href="http://kimjmin.net/2018/01/2018-01-build-es-cluster-5/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="/css/kimjmin.css">
    
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <!-- <link href="http://cdn.staticfile.org/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Jongmin&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Image to hack wechat -->
<!-- <img src="http://kimjmin.net/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('bg-linux-prompt.jpeg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                          <a class="tag" href="/tags/#Elasticsearch" title="Elasticsearch">Elasticsearch</a>
                        
                          <a class="tag" href="/tags/#Elastic" title="Elastic">Elastic</a>
                        
                          <a class="tag" href="/tags/#Elastic Cluster Settings" title="Elastic Cluster Settings">Elastic Cluster Settings</a>
                        
                    </div>
                    <h1>Elastic Cluster 구성 5</h1>
                    <h2 class="subheading">NFS 구성 및 elasticsearch 추가 설정</h2>
                    <span class="meta">
                        Posted by Jongmin Kim (김종민) on
                        2018-01-05
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">
                
                <div>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- kimjmin.net -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-9760232529092117"
       data-ad-slot="1811620965"
       data-ad-format="auto"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>
                
                <p>원래 이번 포스트에서는 X-Pack Security를 다루려고 했으나 몇가지 구성을 먼저 추가하려고 합니다. 우선 NFS(Network File System)을 설정해서 모든 서버의 <code>/usr/share/elasticsearch</code> 디렉토리를 동기화 시키고 업그레이드나 플러그인 설치 등을 한번에 할 수 있도록 하겠습니다.</p>
<p>참고로 NFS 설정은 잘못하다가 설정이 꼬여버릴 수 있으니 주의하시고 설정을 원하지 않으면 다음 포스트로 넘어가시기 바랍니다.<br>(저도 설정 하다가 네트워크 디렉토리 퍼미션 설정 등 몇가지가 꼬여서 싹 밀고 처음부터 새로 설치했습니다.) 🤯</p>
<p>이전 또는 이후 내용들은 아래 포스트에서 확인하세요.</p>
<blockquote>
<p><a href="/2018/01/2018-01-build-es-cluster-1">1. 서버 생성 및 Elasticsearch RPM 설치</a><br><a href="/2018/01/2018-01-build-es-cluster-2">2. 메모리, 네트워크 설정 및 플러그인 설치</a><br><a href="/2018/01/2018-01-build-es-cluster-3">3. 클러스터 구성 및 마스터, 데이터 노드 설정</a><br><a href="/2018/01/2018-01-build-es-cluster-4">4. Kibana 설치 및 X-Pack Monitoring 확인</a><br><strong>5. NFS 구성 및 elasticsearch 추가 설정</strong><br><a href="/2018/01/2018-01-build-es-cluster-6">6. X-Pack Security를 이용한 SSL 및 TLS 설정</a><br><a href="/2018/01/2018-01-build-es-cluster-7">7. X-Pack License 적용 및 사용자 생성</a><br><a href="/2018/01/2018-01-build-es-cluster-8">8. Logstash 설치 및 Elasticsearch 기본 템플릿 설정</a></p>
</blockquote>
<p>덧붙여 새벽에 페이스북에 달린 질문을 보고 잠시 고민이 되었습니다. 그리고 구성을 다음과 같이 데이터 노드 3개(마스터 겸임)와 코디네이트 노드(데이터를 저장하지 않고 애플리케이션과 통신만 담당하는, 클라이언트 노드 라고 부르기도 합니다) 노드로 바꾸기로 결정했습니다. 새로운 아키텍쳐의 구성은 다음과 같습니다.</p>
<p><img src="coordinate-node.png" alt=""></p>
<ul>
<li>데이터노드 1~3개 중 임의의 노드 하나가 마스터 노드를 겸하게 됩니다.</li>
<li>기존 마스터 노드는 코디네이트 노드로 Kibana 및 다른 애플리케이션과의 통신만 처리하게 됩니다.</li>
<li>코디네이트 노드는 다른 애플리케이션과 REST API를 사용합니다.(9200 포트)</li>
<li>코디네이트 노드와 데이터 노드들은 transport 프로토콜(9300 포트)로 데이터를 교환합니다.</li>
<li>데이터 노드들은 REST API를 사용하지 않도록 설정합니다. <code>http.enabled: false</code></li>
<li>코디네이트 노드 서버의 <code>/usr/share/elasticsearch</code> 디렉토리를 데이터 노드와 공유합니다.</li>
<li>보안그룹 1은 코디네이트 노드 서버에만 적용 되며 허가된 포트로만 외부 클라이언트와 통신이 가능합니다.</li>
<li>보안그룹 2는 모든 서버에 적용되며 이 그룹 안의 서버들 끼리는 자유롭게 통신이 가능합니다.</li>
</ul>
<h2 id="NFS-설정"><a href="#NFS-설정" class="headerlink" title="NFS 설정"></a>NFS 설정</h2><p>NFS 설정은 다음 포스트를 참고했습니다.<br><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-an-nfs-mount-on-centos-6" target="_blank" rel="noopener">https://www.digitalocean.com/community/tutorials/how-to-set-up-an-nfs-mount-on-centos-6</a></p>
<p>편의상 코디네이트 노드를 서버, 데이터 노드 3대를 클라이언트 라고 표현 하겠습니다. 서버의 주소는 <code>192.168.0.10</code>, 클라이언트의 주소는 각각 <code>192.168.0.11</code>,<code>192.168.0.12</code>,<code>192.168.0.13</code> 이라고 가정 하겠습니다.<br>우선 저희 Amazon linux 서버에는 <code>nfs-utils</code>,<code>nfs-utils-lib</code> 가 이미 설치 되어 있습니다. 설치되어 있지 않다면 위 포스트를 참고해서 설치하시면 됩니다.</p>
<p>4개의 모든 서버에서 먼저 elasticsearch 서비스를 중지합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo service elasticsearch stop</span><br></pre></td></tr></table></figure></p>
<h3 id="usr-share-elasticsearch-공유-설정"><a href="#usr-share-elasticsearch-공유-설정" class="headerlink" title="/usr/share/elasticsearch 공유 설정"></a><code>/usr/share/elasticsearch</code> 공유 설정</h3><p>먼저 elasticsearch 프로그램들이 들어있는 <code>/usr/share/elasticsearch</code> 디렉토리 공유를 설정하겠습니다. 공유를 하는 목적은 업그레이드나 플러그인 설치 등을 각 서버별로 하지 않고 한번에 적용할 수 있도록 하기 위함입니다.</p>
<h4 id="서버"><a href="#서버" class="headerlink" title="서버"></a>서버</h4><p>서버에서 <code>/etc/exports</code> 파일을 열고<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/exports</span><br></pre></td></tr></table></figure></p>
<p>아래 내용을 추가합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/usr/share/elasticsearch  192.168.0.11(rw,sync,no_root_squash,no_subtree_check)</span><br><span class="line">/usr/share/elasticsearch  192.168.0.12(rw,sync,no_root_squash,no_subtree_check)</span><br><span class="line">/usr/share/elasticsearch  192.168.0.13(rw,sync,no_root_squash,no_subtree_check)</span><br></pre></td></tr></table></figure></p>
<p>그리고 설정을 적용 해 줍니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo exportfs -a</span><br></pre></td></tr></table></figure></p>
<h4 id="클라이언트"><a href="#클라이언트" class="headerlink" title="클라이언트"></a>클라이언트</h4><p>이제 클라이언트를 설정합니다. 3개 시스템에 모두 적용 해 줘야 합니다.<br>먼저 기존의 <code>/usr/share/elasticsearch</code> 를 삭제하고 빈 디렉토리로 다시 만듭니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo rm -rf /usr/share/elasticsearch</span><br><span class="line">sudo mkdir /usr/share/elasticsearch</span><br></pre></td></tr></table></figure></p>
<p>그리고 나서 서버의 네트워크 디렉토리를 마운트 해 줍니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mount 192.168.0.10:/usr/share/elasticsearch /usr/share/elasticsearch</span><br></pre></td></tr></table></figure></p>
<p>시스템 재시작 후에도 공유 디렉토리가 유지되도록 <code>/etc/fstab</code> 파일에 다음 내용을 추가합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fstab</span><br><span class="line">192.168.0.10:/usr/share/elasticsearch    /usr/share/elasticsearch  nfs     auto,noatime,nolock,bg,nfsvers=3,intr,tcp,actimeo=1800  0 0</span><br></pre></td></tr></table></figure></p>
<h3 id="etc-elasticsearch-공유-설정"><a href="#etc-elasticsearch-공유-설정" class="headerlink" title="/etc/elasticsearch 공유 설정"></a><code>/etc/elasticsearch</code> 공유 설정</h3><p>다음은 config 파일들이 들어있는 <code>/etc/elasticsearch</code> 디렉토리 공유를 설정하겠습니다. config 파일들은 코디네이터 노드와 데이터 노드들이 구분되어야 하기 때문에 데이터 노드들은 서버에 <code>/etc/elasticsearch-data</code> 라는 디렉토리를 새로 만들어 이 디렉토리와 공유되도록 하겠습니다.</p>
<h4 id="서버-1"><a href="#서버-1" class="headerlink" title="서버"></a>서버</h4><p>먼저 서버에서 기존 <code>/etc/elasticsearch</code> 디렉토리를 권한 그대로 <code>/etc/elasticsearch-data</code>로 복사합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo cp -pr /etc/elasticsearch /etc/elasticsearch-data</span><br></pre></td></tr></table></figure></p>
<p>다시 <code>/etc/exports</code> 파일을 열고<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/exports</span><br></pre></td></tr></table></figure></p>
<p>아래 내용을 추가합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/etc/elasticsearch-data  192.168.0.11(rw,sync,no_root_squash,no_subtree_check)</span><br><span class="line">/etc/elasticsearch-data  192.168.0.12(rw,sync,no_root_squash,no_subtree_check)</span><br><span class="line">/etc/elasticsearch-data  192.168.0.13(rw,sync,no_root_squash,no_subtree_check)</span><br></pre></td></tr></table></figure></p>
<p>그리고 설정을 실행 해 줍니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo exportfs -a</span><br></pre></td></tr></table></figure></p>
<h4 id="클라이언트-1"><a href="#클라이언트-1" class="headerlink" title="클라이언트"></a>클라이언트</h4><p>다시 클라이언트로(3개 모두 실행해야 합니다) 가서 기존의 <code>/etc/elasticsearch</code> 에 있는 파일들을 모두 삭제 해 줍니다. 루트 권한으로 들어가서 삭제 하는 것이 편합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo su</span><br><span class="line">cd /etc/elasticsearch</span><br><span class="line">rm -rf ./*</span><br><span class="line">exit</span><br></pre></td></tr></table></figure></p>
<p>서버의 <code>/etc/elasticsearch-data</code> 네트워크 디렉토리를 클라이언트의 <code>/etc/elasticsearch</code>로 마운트 해 줍니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mount 192.168.0.10:/etc/elasticsearch-data /etc/elasticsearch</span><br></pre></td></tr></table></figure></p>
<p>시스템 재시작 후에도 NFS가 유지되도록 <code>/etc/fstab</code> 파일에 다음 내용을 추가합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fstab</span><br><span class="line">192.168.0.10:/etc/elasticsearch-data  /etc/elasticsearch  nfs     auto,noatime,nolock,bg,nfsvers=3,intr,tcp,actimeo=1800  0 0</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>만약 재시작 후 데이터 노드에서 오류가 나면 기존 데이터 디렉토리를 삭제해야 합니다.<br>아직 운영 데이터는 없기를 바랍니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo rm -rf /var/lib/elasticsearch/*</span><br></pre></td></tr></table></figure></p>
<p>그리고 혹시 클라이언트에 X-Pack 같은 플러그인 설정 파일들이 없다면 서버의 마스터 설정 디렉토리 <code>/etc/elasticsearch</code> 에서 데이터 설정 디렉토리 <code>/etc/elasticsearch-data</code> 로 복사 해줘야 합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo cp -rp /etc/elasticsearch/elasticsearch.keystore /etc/elasticsearch-data/elasticsearch.keystore</span><br><span class="line">sudo cp -rp /etc/elasticsearch/x-pack /etc/elasticsearch-data/x-pack</span><br></pre></td></tr></table></figure></p>
<p>파일 접근 권한 때문에 데이터 노드들이 실행이 안 될수 있습니다. 데이터 노드들의 그룹 권한을 아래와 같이 elasticsearch로 설정 해 주어야 합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo chown -R root:elasticsearch /etc/elasticsearch</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="elasticsearch-재설정"><a href="#elasticsearch-재설정" class="headerlink" title="elasticsearch 재설정"></a>elasticsearch 재설정</h2><p>이제 이전 포스트들을 참고 해서 <code>/etc/elasticsearch</code>,<code>/etc/elasticsearch-data</code> 안에 있는 설정 파일들을 데이터 노드 설정에 맞게 바꾸도록 합니다. 기존에 마스터 노드였던 노드는 코디네이터 노드로 다시 변경하겠습니다. 이후 모든 명령은 코디네이터 노드에서 실행 해 줍니다.</p>
<h3 id="Coordinate-Client-Node"><a href="#Coordinate-Client-Node" class="headerlink" title="Coordinate (Client) Node"></a>Coordinate (Client) Node</h3><p>먼저 코디네이트 노드의 메모리는 기존에 4GB 에서 2GB로 줄이도록 하겠습니다. 데이터 노드는 8GB 그대로 둡니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[ ]$ sudo vim /etc/elasticsearch/jvm.options</span><br><span class="line">-Xms2g</span><br><span class="line">-Xmx2g</span><br></pre></td></tr></table></figure></p>
<p>이제 코디네이트 노드의 <code>elasticsearch.yml</code> 설정을 변경합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/elasticsearch/elasticsearch.yml</span><br></pre></td></tr></table></figure></p>
<p>마스터 노드가 코디네이트 노드로 바뀌었기 때문에 unicast 설정도 데이터노드 3개의 아이피를 넣어줍니다. 코디네이트 노드와 데이터 노드 설정 파일 모두 적용해야 합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">discovery.zen.ping.unicast.hosts:</span><br><span class="line">  - 192.168.0.11</span><br><span class="line">  - 192.168.0.12</span><br><span class="line">  - 192.168.0.13</span><br></pre></td></tr></table></figure></p>
<p>다음은 코디네이트 노드의 마스터와 데이터 설정을 모두 비활성화 시킵니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">node.master: false</span><br><span class="line">node.data: false</span><br></pre></td></tr></table></figure></p>
<h3 id="Data-Node"><a href="#Data-Node" class="headerlink" title="Data Node"></a>Data Node</h3><p>데이터 노드의 <code>elasticsearch.yml</code> 설정을 변경합니다. 코디네이트 노드가 있는 서버에서 공유 디렉토리에 있는 설정 파일을 편집하면 됩니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/elasticsearch-data/elasticsearch.yml</span><br></pre></td></tr></table></figure></p>
<p>코디네이트 노드와 마찬가지로 unicast 설정을 데이터노드 3개의 아이피로 변경합니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">discovery.zen.ping.unicast.hosts:</span><br><span class="line">  - 192.168.0.11</span><br><span class="line">  - 192.168.0.12</span><br><span class="line">  - 192.168.0.13</span><br></pre></td></tr></table></figure></p>
<p>기존의 <code>node.master: false</code> 부분은 삭제합니다.</p>
<p>마지막으로 데이터 노드들은 REST API를 사용하지 않도록 http 포트를 비활성화 시킵니다.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http.enabled: false</span><br></pre></td></tr></table></figure></p>
<p>이제 모든 설정이 끝났으면 서버들을 재시작 합니다. 개인적인 경험인데 한꺼번에 동시에 재시작 하니까 데이터노드 하나가 클러스터에 안 붙는 경우가 있었는데 그 서버만 다시 재시작 하면 정상적으로 붙습니다.</p>
<p>X-Pack 모니터링 화면에서 확인 해 보면 이번에는 데이터 노드 중 하나가 마스터를 겸하고 있고 기존의 마스터 노드는 계속 데이터를 저장하지 않는 코디네이트 노드로 남은 것을 확인할 수 있습니다.</p>
<p><img src="coordinate-monitoring.png" alt=""></p>
<p>이제 네트워크 파일 설정이 끝났으니 앞으로 환경 설정을 변경하거나 업그레이드, 패치 등을 할 때도 데이터 노드 서버에 접속할 일 없이 코디네이트 노드 서버에서 모든 것을 할 수 있게 되었습니다.</p>
<p>다음편에는 진짜로 X-Pack Security 설정을 다루도록 하겠습니다.</p>
<blockquote>
<p><a href="/2018/01/2018-01-build-es-cluster-1">1. 서버 생성 및 Elasticsearch RPM 설치</a><br><a href="/2018/01/2018-01-build-es-cluster-2">2. 메모리, 네트워크 설정 및 플러그인 설치</a><br><a href="/2018/01/2018-01-build-es-cluster-3">3. 클러스터 구성 및 마스터, 데이터 노드 설정</a><br><a href="/2018/01/2018-01-build-es-cluster-4">4. Kibana 설치 및 X-Pack Monitoring 확인</a><br><strong>5. NFS 구성 및 elasticsearch 추가 설정</strong><br><a href="/2018/01/2018-01-build-es-cluster-6">6. X-Pack Security를 이용한 SSL 및 TLS 설정</a><br><a href="/2018/01/2018-01-build-es-cluster-7">7. X-Pack License 적용 및 사용자 생성</a><br><a href="/2018/01/2018-01-build-es-cluster-8">8. Logstash 설치 및 Elasticsearch 기본 템플릿 설정</a></p>
</blockquote>


                <hr>

                

                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2018/01/2018-01-build-es-cluster-6/" data-toggle="tooltip" data-placement="top" title="Elastic Cluster 구성 6">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2018/01/2018-01-build-es-cluster-4/" data-toggle="tooltip" data-placement="top" title="Elastic Cluster 구성 4">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                

                
                <!-- disqus 评论框 start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus 评论框 end -->
                

            </div>
    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Elasticsearch" title="Elasticsearch">Elasticsearch</a>
                        
                          <a class="tag" href="/tags/#Elastic" title="Elastic">Elastic</a>
                        
                          <a class="tag" href="/tags/#Elastic Cluster Settings" title="Elastic Cluster Settings">Elastic Cluster Settings</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://elastic.co">Elastic</a></li>
                    
                        <li><a href="http://david.pilato.fr">David Pilato Blog</a></li>
                    
                </ul>
                
            </div>

        </div>
    </div>
</article>




<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "kimjmin";
    var disqus_identifier = "http://kimjmin.net/2018/01/2018-01-build-es-cluster-5/";
    var disqus_url = "http://kimjmin.net/2018/01/2018-01-build-es-cluster-5/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus 公共JS代码 end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("http://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                  <!-- Jongmin Kim : RSS Feed added start -->
                  <li>
                      <a href="/atom.xml">
                          <span class="fa-stack fa-lg">
                              <i class="fa fa-circle fa-stack-2x"></i>
                              <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                          </span>
                      </a>
                  </li>
                  <!-- Jongmin Kim : RSS Feed added end -->
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/kimjmin">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                

                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/kimjmin81">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://github.com/kimjmin">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://www.linkedin.com/in/kimjmin">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Jongmin&#39;s Blog 2018 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    Ported by <a href="http://blog.kaijun.rocks">Kaijun</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://kimjmin.net/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("http://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-51709817-2';
    var _gaDomain = 'kimjmin.net';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Side Catalog -->





<!-- Image to hack wechat -->
<img src="http://kimjmin.net/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
